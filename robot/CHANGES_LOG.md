# 📝 تغییرات انجام شده - نسخه 1.4.2 - 1404/05/16 ساعت 00:15

## 🔧 مشکلات حل شده:

### 1. فعال‌سازی دکمه نقش‌ها در پنل مدیر
- **مشکل**: دکمه "نقش‌ها" در پنل مدیر نمایش داده نمی‌شد، حتی با تنظیم `ROLES_BUTTON: 1`
- **راه حل**: فعال‌سازی کامل دکمه نقش‌ها در `generateDynamicKeyboard` و callback handler
- **فایل تغییر یافته**: `5polling.js`
- **جزئیات**: 
  - دکمه "نقش‌ها" به کیبورد مدیر مدرسه اضافه شد
  - callback handler برای دکمه نقش‌ها فعال شد
  - بررسی دسترسی کاربر برای مدیریت نقش‌ها

### 2. قابلیت کنترل نمایش دکمه روزهای تمرین و ارزیابی
- **مشکل**: دکمه "روزهای تمرین و ارزیابی" همیشه نمایش داده می‌شد
- **راه حل**: اضافه شدن قابلیت کنترل نمایش این دکمه با تنظیمات ۰ و ۱
- **فایل تغییر یافته**: `3config.js`, `11settings.js`
- **تنظیمات جدید**: `PRACTICE_EVALUATION_DAYS_BUTTON: 1` (فعال) یا `0` (غیرفعال)

### 2. بهبود مدیریت دکمه‌های پنل تنظیمات
- **مشکل**: عدم امکان کنترل نمایش دکمه‌های خاص در پنل تنظیمات
- **راه حل**: پیاده‌سازی سیستم کنترل نمایش دکمه‌ها بر اساس کانفیگ
- **فایل تغییر یافته**: `3config.js`, `11settings.js`

---

# 📝 تغییرات انجام شده - نسخه 1.4.0 - 1404/05/13 ساعت 10:55

## 🔧 مشکلات حل شده:

### 1. جداسازی ادمین مدرسه و ادمین گروه
- **مشکل**: ادمین مدرسه و ادمین گروه یکسان بودند
- **راه حل**: جداسازی کامل ادمین مدرسه و ادمین گروه
- **فایل تغییر یافته**: `2admin.js`

### 2. ادغام /لیست و /بررسی
- **مشکل**: دو دستور جداگانه برای یک کار
- **راه حل**: ادغام /لیست و /بررسی - هر بار /لیست زده می‌شود، بررسی هم انجام می‌شود
- **فایل تغییر یافته**: `5polling.js`

### 3. گزارش عضویت به گروه
- **مشکل**: عضویت افراد گزارش نمی‌شد
- **راه حل**: هر عضویت جدید به گروه گزارش ارسال می‌شود
- **فایل تغییر یافته**: `7group.js`

### 4. حذف قابلیت‌های غیرضروری
- **مشکل**: قابلیت‌های "ورود مربی"، "خروج مربی"، "ورود به مدرسه"، "خروج از مدرسه" و "پنل ادمین گروه" اضافی بودند
- **راه حل**: حذف این قابلیت‌ها و ساده‌سازی سیستم
- **فایل تغییر یافته**: `5polling.js`, `6mid.js`

### 5. تبدیل لوگ‌های فارسی به انگلیسی
- **مشکل**: لوگ‌های فارسی در کنسول نمایش داده می‌شدند
- **راه حل**: تمام لوگ‌های فارسی به انگلیسی تبدیل شدند
- **فایل تغییر یافته**: `5polling.js`, `7group.js`, `8logs.js`, `index.js`, `src/1.js`

### 6. حذف "ام" از ابتدای نام ماه‌ها
- **مشکل**: "ام" در ابتدای نام ماه‌ها نمایش داده می‌شد
- **راه حل**: حذف "ام" از ابتدای نام ماه‌ها با regex
- **فایل تغییر یافته**: `8logs.js`

### 7. بهبود فرمت پیام‌های خاموشی/روشنی
- **مشکل**: فرمت پیام‌های خاموشی و روشنی مناسب نبود
- **راه حل**: فرمت جدید با ساعت و تاریخ شمسی پیاده‌سازی شد
- **فایل تغییر یافته**: `8logs.js`

## 🎯 نقش‌های جدید - نسخه 1.4.0:

### مدیر مدرسه (School Admin)
- آیدی: 1114227010 (محمد ۱)
- دستورات: `/ربات`, `/لیست`
- پنل: پنل مدیریتی
- توضیح: فقط مدیر مدرسه - پنل مدیریتی در خصوصی

### مربی (Coach)
- آیدی: 574330749 (محمد زارع ۲)
- دستورات: `/ربات`, `/لیست`
- پنل: پنل مربی

### کمک مربی (Assistant)
- آیدی: 1790308237 (ایراتسل)
- دستورات: `/ربات`, `/لیست`
- پنل: پنل کمک مربی

### قرآن آموز (Student)
- دستورات: `/عضو`
- پنل: پنل قرآن آموز

## 📋 پاسخ به سوالات - نسخه 1.4.0:

### سوال 1: آیا نیاز به /عضو گیری مجدد است؟
**پاسخ**: خیر، اگر لیست را دارید نیازی به /عضو گیری مجدد نیست. ربات به طور خودکار تشخیص می‌دهد که چه کسی از گروه خارج شده و اضافه شده است.

### سوال 2: /بررسی چیست؟
**پاسخ**: `/بررسی` حذف شد و با `/لیست` ادغام شد. حالا هر بار `/لیست` زده می‌شود، بررسی هم انجام می‌شود.

### سوال 3: چرا محمد نمی‌توانست /ربات و /لیست بزند؟
**پاسخ**: محمد حالا در لیست `GROUP_ADMIN_IDS` قرار دارد و می‌تواند از این دستورات استفاده کند.

## 🔄 تغییرات جدید - نسخه 1.4.0:

1. **جداسازی ادمین مدرسه و ادمین گروه**: ادمین مدرسه فقط مدیر مدرسه است
2. **ادغام /لیست و /بررسی**: هر بار /لیست زده می‌شود، بررسی هم انجام می‌شود
3. **گزارش عضویت**: هر عضویت جدید به گروه گزارش ارسال می‌شود
4. **حذف قابلیت‌های غیرضروری**: ورود مربی، خروج مربی، ورود به مدرسه، خروج از مدرسه و پنل ادمین گروه حذف شدند
5. **ساده‌سازی پنل‌ها**: هر نقش فقط پنل مخصوص خود را دارد
6. **تبدیل لوگ‌های فارسی به انگلیسی**: تمام پیام‌های کنسول به انگلیسی تبدیل شدند
7. **حذف "ام" از ابتدای نام ماه‌ها**: نمایش تمیزتر تاریخ
8. **بهبود فرمت پیام‌های خاموشی و روشنی**: فرمت جدید با ساعت و تاریخ شمسی

## 📊 بهبودهای انجام شده - نسخه 1.4.0:

- جداسازی کامل ادمین مدرسه و ادمین گروه
- ادغام دستورات /لیست و /بررسی
- گزارش خودکار عضویت به گروه
- ساده‌سازی سیستم نقش‌ها و پنل‌ها
- حذف قابلیت‌های غیرضروری (ورود/خروج مربی، ورود/خروج مدرسه)
- حذف پنل ادمین گروه (غیرضروری)
- تبدیل تمام لوگ‌های فارسی به انگلیسی
- حذف "ام" از ابتدای نام ماه‌ها
- بهبود فرمت پیام‌های خاموشی و روشنی
- بهبود مدیریت خطا

---
*تاریخ آخرین به‌روزرسانی: 1404/05/13 ساعت 10:55 - نسخه 1.4.0*