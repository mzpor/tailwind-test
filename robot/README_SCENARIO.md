# 🎯 راهنمای کانفیگ سناریو ثبت‌نام قرآن‌آموز

## 📋 توضیحات
این سیستم امکان انتخاب بین دو سناریو مختلف برای ثبت‌نام قرآن‌آموزان را فراهم می‌کند.

## 🔄 سناریوها

### سناریو 1 (پیش‌فرض)
- **مراحل:** شماره تلفن → درخواست نام و فامیل → تکمیل ثبت‌نام
- **نتیجه:** کاربر باید نام و فامیل خود را وارد کند

### سناریو 2
- **مراحل:** شماره تلفن → درخواست نام و فامیل → تکمیل حساب کاربری → ثبت‌نام در کارگاه
- **نتیجه:** کاربر نام و فامیل خود را وارد می‌کند، سپس می‌تواند در کارگاه ثبت‌نام کند
- **ویژگی‌ها:**
  - کیبرد معمولی ثابت (مدرسه تلاوت + حساب کاربری)
  - کیبرد شیشه‌ای برای انصراف/بازگشت
  - ذخیره نام در `smart_registration.json`
  - انتقال به جریان ثبت‌نام کارگاه

## ⚙️ تنظیمات

### تغییر سناریو در کد
```javascript
const { setQuranStudentScenario } = require('./3config');

// تغییر به سناریو 2
setQuranStudentScenario(2);

// تغییر به سناریو 1
setQuranStudentScenario(1);
```

### بررسی سناریو فعلی
```javascript
const { getQuranStudentScenario } = require('./3config');

const currentScenario = getQuranStudentScenario();
console.log(`سناریو فعلی: ${currentScenario}`);
```

## 📁 فایل‌های مرتبط
- `3config.js` - کانفیگ اصلی و توابع کنترل
- `15reg.js` - ماژول ثبت‌نام (استفاده از کانفیگ)

## 🎮 نحوه کار

### سناریو 1
1. کاربر ناشناس روی "مدرسه تلاوت" کلیک می‌کند
2. شماره تلفن خود را وارد می‌کند
3. سیستم درخواست نام و فامیل می‌کند
4. کاربر نام و فامیل را وارد می‌کند
5. ثبت‌نام تکمیل می‌شود

### سناریو 2
1. کاربر ناشناس روی "مدرسه تلاوت" کلیک می‌کند
2. شماره تلفن خود را وارد می‌کند
3. سیستم پیام "لطفا نام و نام خانوادگی خود را وارد کنید(فقط حروف فارسی):" نمایش می‌دهد
4. کیبرد شیشه‌ای با دکمه‌های "انصراف" و "بازگشت" نمایش داده می‌شود
5. کاربر نام و فامیل خود را وارد می‌کند
6. پیام "حساب کاربری کامل شد" نمایش داده می‌شود
7. کیبرد شیشه‌ای "ثبت‌نام در کارگاه" نمایش داده می‌شود
8. کاربر به جریان ثبت‌نام کارگاه هدایت می‌شود

## 🔧 نکات فنی

### سناریو 1
- کیبرد معمولی در طول فرآیند تغییر می‌کند
- شماره تلفن و نام در `smart_registration.json` ذخیره می‌شود
- ثبت‌نام پس از ورود نام تکمیل می‌شود

### سناریو 2
- کیبرد معمولی ثابت (مدرسه تلاوت + حساب کاربری) در طول فرآیند نمایش داده می‌شود
- شماره تلفن و نام در `smart_registration.json` ذخیره می‌شود
- کیبرد شیشه‌ای برای تعاملات خاص استفاده می‌شود
- پس از تکمیل نام، کاربر به جریان ثبت‌نام کارگاه هدایت می‌شود

## 📝 مراحل جدید سناریو 2
- `scenario2_waiting_for_name`: انتظار برای ورود نام
- `scenario2_completed`: تکمیل حساب کاربری
- Callback query های پشتیبانی شده:
  - `scenario2_cancel`: انصراف از فرآیند
  - `scenario2_back`: بازگشت به مرحله قبل
  - `scenario2_workshop_registration`: ثبت‌نام در کارگاه
