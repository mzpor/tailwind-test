# ๐ฏ ุณุณุชู ูุฏุฑุช ฺฉูพุงุฑฺู ุซุจุชโูุงู - ูุนุงู ุดุฏู

## โ **ูุถุนุช ูุนู**
- ุณุณุชู ฺฉูพุงุฑฺู **ูุนุงู** ุดุฏู
- ูุงูโูุง ุงุถุงู **ูพุงฺฉโุณุงุฒ** ุดุฏู
- ููุงููฺฏ ฺฉุงูู ุจู ุฑุจุงุช ู ุณุงุช

## ๐ง **ุชุบุฑุงุช ุงุนูุงู ุดุฏู**
1. **ุญุฐู** `smart_registration.json` (ุณุงุฎุชุงุฑ ูุชูุงูุช)
2. **ูุนุงูโุณุงุฒ** `UnifiedRegistrationManager` ุฏุฑ `index.js`
3. **ฺฉูพุงุฑฺูโุณุงุฒ** ฺฉุงูู ุณุณุชูโูุง
4. **ุงูุชูุงู** `registration_data.json` ุจู ูพูุดู `data/` ุจุฑุง ูุฏุฑุช ุจูุชุฑ

## โจ ูฺฺฏโูุง ฺฉูุฏ

### ๐ **ููุงููฺฏ ฺฉุงูู ุจู ุฑุจุงุช ู ุณุงุช**
- ุซุจุชโูุงู ุงุฒ ูุฑ ุฏู ูพูุชูุฑู ุฏุฑ ฺฉ ุณุณุชู
- ุฌููฺฏุฑ ุงุฒ ุซุจุชโูุงูโูุง ุชฺฉุฑุงุฑ
- ููุงููฺฏโุณุงุฒ ุฎูุฏฺฉุงุฑ ุงุทูุงุนุงุช

### ๐ **ูุฏุฑุช ููุดููุฏ ูุถุนุชโูุง**
- **ูุงุดูุงุณ**: ฺฉุงุฑุจุฑุงู ุฌุฏุฏ ุจุฏูู ุงุทูุงุนุงุช
- **ูุงูุต**: ฺฉุงุฑุจุฑุงู ุจุง ุงุทูุงุนุงุช ุฌุฒุฆ
- **ุชฺฉูู ุดุฏู**: ฺฉุงุฑุจุฑุงู ุจุง ุชูุงู ุงุทูุงุนุงุช

### ๐ **ุฌุณุชุฌู ู ุงูุชู ูพุดุฑูุชู**
- ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ูุงูุ ฺฉุฏ ููุ ุชููู
- ุงูุชู ฺฉุงุฑุจุฑุงู ุฏุฑ ูุฑ ุฏู ูุงู
- ฺฏุฒุงุฑุดโฺฏุฑ ฺฉุงูู

## ๐๏ธ ุณุงุฎุชุงุฑ ูุงูโูุง

### ๐ `data/registrations.json` (ุซุจุชโูุงูโูุง ุฑุจุงุช)
```json
{
  "r_1754706711344": {
    "fullName": "ุนู ุฑุถุง",
    "firstName": "ุนู",
    "nationalId": "1234567890",
    "phone": "09123456789",
    "workshopId": "w-1404-01",
    "status": "completed",
    "source": "bot",
    "registrationComplete": true,
    "ts": 1754706711344,
    "lastUpdated": 1754706711344
  }
}
```

### ๐ `data/registration_data.json` (ุซุจุชโูุงูโูุง ุณุงุช)
```json
{
  "1234567890": {
    "fullName": "ุนู ุฑุถุง",
    "firstName": "ุนู",
    "nationalId": "1234567890",
    "phone": "09123456789",
    "workshopId": "w-1404-01",
    "status": "completed",
    "source": "both",
    "registrationComplete": true,
    "ts": 1754706711344,
    "lastUpdated": 1754706711344
  }
}
```

## ๐ ูุญูู ุงุณุชูุงุฏู

### 1๏ธโฃ **ุฑุงูโุงูุฏุงุฒ**
```javascript
const UnifiedRegistrationManager = require('./unified_registration_manager');
const manager = new UnifiedRegistrationManager();
```

### 2๏ธโฃ **ุซุจุชโูุงู ุงุฒ ุฑุจุงุช**
```javascript
const userData = {
  fullName: 'ุนู ุฑุถุง',
  firstName: 'ุนู',
  nationalId: '1234567890',
  phone: '09123456789',
  workshopId: 'w-1404-01'
};

const registrationId = manager.registerFromBot('bot_user_123', userData);
```

### 3๏ธโฃ **ุซุจุชโูุงู ุงุฒ ุณุงุช**
```javascript
const userData = {
  fullName: 'ุณุงุฑุง ุงุญูุฏ',
  firstName: 'ุณุงุฑุง',
  phone: '09987654321',
  workshopId: 'w-1404-02'
};

const websiteUserId = manager.registerFromWebsite('0987654321', userData);
```

### 4๏ธโฃ **ุฌุณุชุฌู ฺฉุงุฑุจุฑุงู**
```javascript
// ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ฺฉุฏ ูู
const user = manager.findUserByNationalId('1234567890');

// ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ุชููู
const user = manager.findUserByPhone('09123456789');

// ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ูุงู
const results = manager.searchUsers('ุนู');
```

### 5๏ธโฃ **ุจูโุฑูุฒุฑุณุงู ุงุทูุงุนุงุช**
```javascript
const updates = {
  phone: '09111111111',
  workshopId: 'w-1404-03'
};

manager.updateUser('user_id', updates, 'bot');
```

## ๐ ูุถุนุชโูุง ุซุจุชโูุงู

### ๐ด **ูุงุดูุงุณ (new)**
- ูฺ ุงุทูุงุนุงุช ุซุจุช ูุดุฏู
- ูุงุฒ ุจู ุดุฑูุน ูุฑุขูุฏ ุซุจุชโูุงู

### ๐ก **ูุงูุต (incomplete)**
- ุจุฎุด ุงุฒ ุงุทูุงุนุงุช ููุฌูุฏ
- ูุงุฒ ุจู ุชฺฉูู ุงุทูุงุนุงุช

### ๐ **ุฏุฑ ุงูุชุธุงุฑ (pending)**
- ุชูุงู ุงุทูุงุนุงุช ูุงุฑุฏ ุดุฏู
- ูุงุฒ ุจู ุชุฃุฏ ููุง

### ๐ข **ุชฺฉูู ุดุฏู (completed)**
- ุซุจุชโูุงู ฺฉุงูู
- ุขูุงุฏู ุงุณุชูุงุฏู ุงุฒ ุฎุฏูุงุช

## ๐ ููุงููฺฏโุณุงุฒ ุฎูุฏฺฉุงุฑ

### ๐ค **ุฑุจุงุช โ ุณุงุช**
- ุซุจุช ุฎูุฏฺฉุงุฑ ุฏุฑ `registration_data.json`
- ุงุฌุงุฏ API call ุจู ุณุงุช
- ููุงููฺฏโุณุงุฒ ุงุทูุงุนุงุช

### ๐ **ุณุงุช โ ุฑุจุงุช**
- ุซุจุช ุฎูุฏฺฉุงุฑ ุฏุฑ `registrations.json`
- ุงุฌุงุฏ ุฑฺฉูุฑุฏ ุจุง ูพุดููุฏ `w_`
- ููุงููฺฏโุณุงุฒ ฺฉุงูู

## ๐งน ูพุงฺฉโุณุงุฒ ู ูฺฏูุฏุงุฑ

### ๐ **ุชุดุฎุต ุฑฺฉูุฑุฏูุง ุชฺฉุฑุงุฑ**
```javascript
const cleanedCount = manager.cleanupDuplicates();
console.log(`๐งน ${cleanedCount} ุฑฺฉูุฑุฏ ุชฺฉุฑุงุฑ ูพุงฺฉโุณุงุฒ ุดุฏ`);
```

### ๐ **ฺฏุฒุงุฑุดโฺฏุฑ**
```javascript
const stats = manager.getStatistics();
console.log(`๐ ฺฉู ฺฉุงุฑุจุฑุงู: ${stats.total}`);
console.log(`โ ุชฺฉูู ุดุฏู: ${stats.completed}`);
console.log(`โ ูุงูุต: ${stats.incomplete}`);
```

## ๐งช ุชุณุช ุณุณุชู

### **ุงุฌุฑุง ุชุณุชโูุง**
```bash
node test_unified_registration.js
```

### **ุชุณุชโูุง ููุฌูุฏ**
1. โ ุซุจุชโูุงู ุงุฒ ุฑุจุงุช
2. โ ุซุจุชโูุงู ุงุฒ ุณุงุช
3. โ ุฌุณุชุฌู ู ุงูุชู ฺฉุงุฑุจุฑุงู
4. โ ุจูโุฑูุฒุฑุณุงู ุงุทูุงุนุงุช
5. โ ุขูุงุฑ ู ฺฏุฒุงุฑุดโฺฏุฑ
6. โ ูพุงฺฉโุณุงุฒ ุฑฺฉูุฑุฏูุง ุชฺฉุฑุงุฑ

## ๐ง ุชูุธูุงุช ูพุดุฑูุชู

### **ูุงูโูุง ูพฺฉุฑุจูุฏ**
- `data/workshops.json`: ฺฉุงุฑฺฏุงูโูุง ููุฌูุฏ
- `data/registrations.json`: ุซุจุชโูุงูโูุง ุฑุจุงุช
- `registration_data.json`: ุซุจุชโูุงูโูุง ุณุงุช

### **ูุชุบุฑูุง ูุญุท**
- `WEBSITE_URL`: ุขุฏุฑุณ ุณุงุช ุจุฑุง ููุงููฺฏโุณุงุฒ
- `API_TIMEOUT`: ุฒูุงู ุงูุชุธุงุฑ ุจุฑุง API calls
- `SYNC_INTERVAL`: ูุงุตูู ููุงููฺฏโุณุงุฒ ุฎูุฏฺฉุงุฑ

## ๐จ ูุฏุฑุช ุฎุทุงูุง

### **ุฎุทุงูุง ุฑุงุฌ**
- ูุงูโูุง JSON ุฎุฑุงุจ
- ุนุฏู ุฏุณุชุฑุณ ุจู ูุงูโูุง
- ุฎุทุง ุฏุฑ ููุงููฺฏโุณุงุฒ ุจุง ุณุงุช
- ุฑฺฉูุฑุฏูุง ุชฺฉุฑุงุฑ

### **ุฑุงูโุญูโูุง**
- ุจุฑุฑุณ ูุฌูุฒูุง ูุงู
- ุงุฌุฑุง `cleanupDuplicates()`
- ุจุฑุฑุณ ุงุชุตุงู ุจู ุณุงุช
- ุจุฑุฑุณ ุณุงุฎุชุงุฑ JSON

## ๐ ูุฒุงุง ุณุณุชู ุฌุฏุฏ

### ๐ฏ **ฺฉูพุงุฑฺฺฏ ฺฉุงูู**
- ฺฉ ููุจุน ุญููุช ุจุฑุง ุชูุงู ุงุทูุงุนุงุช
- ุฌููฺฏุฑ ุงุฒ ูุงููุงููฺฏ
- ูุฏุฑุช ูุชูุฑฺฉุฒ

### ๐ **ุนููฺฉุฑุฏ ุจูุชุฑ**
- ุฌุณุชุฌู ุณุฑุนโุชุฑ
- ุฐุฎุฑูโุณุงุฒ ุจููู
- ูพุฑุฏุงุฒุด ููุงุฒ

### ๐ก๏ธ **ุงููุช ุจุดุชุฑ**
- ุจุฑุฑุณ ุชฺฉุฑุงุฑ ูุจูุฏู
- ุงุนุชุจุงุฑุณูุฌ ุฏุงุฏูโูุง
- ูพุดุชุจุงูโฺฏุฑ ุฎูุฏฺฉุงุฑ

## ๐ฎ ุชูุณุนูโูุง ุขูุฏู

### ๐ฑ **ูฺฺฏโูุง ูพุดููุงุฏ**
- API RESTful ฺฉุงูู
- ูพุงฺฏุงู ุฏุงุฏู SQL
- ุงุญุฑุงุฒ ููุช ูพุดุฑูุชู
- ฺฏุฒุงุฑุดโฺฏุฑ ูพุดุฑูุชู
- ุฏุงุดุจูุฑุฏ ูุฏุฑุช

### ๐ **ฺฉูพุงุฑฺูโุณุงุฒ**
- ุณุณุชู ูพุฑุฏุงุฎุช
- ูุฏุฑุช ฺฉุงุฑฺฏุงูโูุง
- ุณุณุชู ุญุถูุฑ ู ุบุงุจ
- ุงุนูุงูโูุง ุฎูุฏฺฉุงุฑ
